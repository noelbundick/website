<!doctype html><html lang=en-us><head><title>aci-compose | Noel Bundick</title><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="aci-compose üîóI learned today that requestb.in had shut down. Their GitHub repo told me I could run it myself & gave me instructions for Heroku.
I thought it would be neat to be able to use a docker-compose file & deploy it to Azure Container Instances. This 20 minutes of hacking gave me something fun
# Create a resource group az group create -n requestbin -l eastus # Run aci-compose # Usage: aci-compose {compose_yaml_path} {resource_group_name} {dns_prefix} ."><meta name=generator content="Hugo 0.109.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/custom.css><link rel=stylesheet href=/fontawesome/css/fontawesome.min.css><link rel=stylesheet href=/fontawesome/css/brands.min.css><link rel="shortcut icon" href=/images/favicon.ico type=image/x-icon></head><body><nav class=navigation><a href=/><span class=arrow>‚Üê</span>Home</a>
<a href=/tags>Tags</a></nav><main class=main><section id=single><h1 class=title>aci-compose</h1><div class=tip><time datetime="2018-05-04 00:00:00 +0000 UTC">May 4, 2018</time>
<span class=split>¬∑</span>
<span>141 words</span>
<span class=split>¬∑</span>
<span>1 minute read</span><div><a href=https://gist.github.com/6ba916a08ab8b7e2781c82520c764ab9>view gist on GitHub</a></div></div><div class=content><h1 id=aci-compose>aci-compose <a href=#aci-compose class=anchor>üîó</a></h1><p>I learned today that requestb.in had shut down. Their <a href=https://github.com/Runscope/requestbin target=_blank rel=noopener>GitHub repo</a> told me I could run it myself & gave me instructions for Heroku.</p><p>I thought it would be neat to be able to use a docker-compose file & deploy it to Azure Container Instances. This 20 minutes of hacking gave me something fun</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#586e75># Create a resource group</span>
</span></span><span style=display:flex><span>az group create -n requestbin -l eastus
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># Run aci-compose</span>
</span></span><span style=display:flex><span><span style=color:#586e75># Usage: aci-compose {compose_yaml_path} {resource_group_name} {dns_prefix}</span>
</span></span><span style=display:flex><span>./aci-compose sample.yml requestbin foo | sh
</span></span></code></pre></div><p>Wait a few moments & you&rsquo;ll be able to hit your frontend container (<code>foo-app.eastus.azurecontainer.io</code>) in a browser. Hit the button to get a request bin url!</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#586e75># Try it out with the generated url</span>
</span></span><span style=display:flex><span>http://foo-app.eastus.azurecontainer.io/xhzfajxi
</span></span></code></pre></div><p>Refresh the page in the browser, you&rsquo;ll see that your curl request was captured!</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#586e75># Tear down</span>
</span></span><span style=display:flex><span>az group delete -n requestbin -y --no-wait
</span></span></code></pre></div><h3>main.go</h3><script src="https://gist.github.com/6ba916a08ab8b7e2781c82520c764ab9.js?file=main.go"></script><h3>sample.yml</h3><script src="https://gist.github.com/6ba916a08ab8b7e2781c82520c764ab9.js?file=sample.yml"></script></div><div class=tags><a href=/tags/gist>gist</a></div></section></main><section><ul class=post-list><li>2021-10-14
<a href=/gists/optimizing-rust-container-builds/>Optimizing Rust container builds<h2></h2></a></li><li>2021-09-19
<a href=/gists/wsl2-container-development-with-moby/>WSL2 container development with Moby<h2></h2></a></li><li>2019-12-17
<a href=/gists/rdp-from-wsl/>RDP from WSL<h2></h2></a></li><li>2019-06-28
<a href=/gists/how-to-use-docker-build-secrets/>How to use Docker build secrets<h2></h2></a></li><li>2019-06-12
<a href=/gists/consuming-packages-from-a-private-azure-pipelines-python-artifact-feed/>Consuming packages from a private Azure Pipelines Python artifact feed<h2></h2></a></li><li>2019-01-13
<a href=/gists/gists-as-a-content-management-system/>Gists as a content management system<h2></h2></a></li><li>2019-01-12
<a href=/gists/azure-function-w--user-assigned-identity/>Azure Function w/ User Assigned Identity<h2></h2></a></li><li>2018-12-15
<a href=/gists/secure-code-execution-via-arm-template-and-azure-container-instances/>Secure code execution via ARM template and Azure Container Instances<h2></h2></a></li><li>2018-12-10
<a href=/gists/azure-redis-cli/>azure-redis-cli<h2></h2></a></li><li>2018-12-10
<a href=/gists/resize-azure-cloud-shell-storage/>Resize Azure Cloud Shell storage<h2></h2></a></li></ul></section><footer id=footer><div id=social><a class=symbol rel=me href=https://www.github.com/noelbundick><i class="fa-brands fa-github"></i></a>
<a class=symbol rel=me href=https://www.linkedin.com/in/noelbundick/><i class="fa-brands fa-linkedin"></i></a>
<a class=symbol rel=me href=https://hachyderm.io/@acanthamoeba><i class="fa-brands fa-mastodon"></i></a></div><div class=copyright>¬© Copyright
2022
<span class=split><svg fill="#bbb" width="15" height="15" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15"><path d="M13.91 6.75c-1.17 2.25-4.3 5.31-6.07 6.94-.1903.1718-.4797.1718-.67.0C5.39 12.06 2.26 9 1.09 6.75-1.48 1.8 5-1.5 7.5 3.45 10-1.5 16.48 1.8 13.91 6.75z"/></svg></span>Noel Bundick</div></footer></body></html>